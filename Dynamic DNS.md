# Pi Cloud : Dynamic DNS

For Dynamic DNS, I use [No-IP](https://no-ip.com), but there are a lot of free and paid options:

* [DynDNS](http://www.dyndns.com)
* [Zoneedit](http://www.zoneedit.com)
* [EasyDNS](http://www.easydns.com)
* [NameCheap](http://www.namecheap.com)
* [DslReports](http://www.dslreports.com)
* [Sitelutions](http://www.sitelutions.com)
* [Loopia](http://www.loopia.se)
* [Noip](http://www.noip.com/)
* [Freedns](http://freedns.afraid.org/)
* [ChangeIP](http://www.changeip.com/)
* [CloudFlare](https://www.cloudflare.com/)
* [Google](http://www.google.com/domains)
* [Duckdns](https://duckdns.org/)
* [Freemyip](https://freemyip.com)
* [woima.fi](https://woima.fi/)
* [Yandex](https://domain.yandex.com/)
* [DNS Made Easy](https://dnsmadeeasy.com/)
* [DonDominio](https://www.dondominio.com)
* [NearlyFreeSpeech.net](https://www.nearlyfreespeech.net/services/dns)
* [OVH](https://www.ovh.com)
* [ClouDNS](https://www.cloudns.net)
* [dinahosting](https://dinahosting.com)
* [Gandi](https://gandi.net)
* [dnsexit](https://dnsexit.com/)

Whatever you choose, you'll need to sign up for an account, and create a hostname.

## ddclient

* Open your Pi's console
* `sudo DEBIAN_FRONTEND=noninteractive apt install -yq ddclient`

> Note: this installs `ddclient` without the interactive configuration,
since it's not terribly helpul.

There is a [template ddclient.conf](https://github.com/ddclient/ddclient/blob/f0270e4940b7f28d551174d8a6e967d2f49368ea/ddclient.conf.in), which should have sample configs for all supported dynamic DNS hosting.  Find the block that
applies to your domain hosting, and

* `sudo nano /etc/ddclient.conf`
* Paste in your edited config.  For example, this works with no-ip:

        # Configuration file for ddclient generated by debconf
        #
        # /etc/ddclient.conf

        protocol=noip
        use=web
        login={your email address}
        password={your noip password}
        {your hostname}

Test your config:

* `sudo ddclient -daemon=0 -debug; echo 0`

A good result will look something like this:

    DEBUG:    proxy  =
    DEBUG:    url    = http://checkip.dyndns.org/
    DEBUG:    server = checkip.dyndns.org
    DEBUG:    get_ip: using web, http://checkip.dyndns.org/ reports 123.45.67.89
    DEBUG:
    DEBUG:     nic_noip_update -------------------
    DEBUG:    proxy  =
    DEBUG:    url    = http://dynupdate.no-ip.com/nic/update?system=noip&hostname=myhost.ddns.net&myip=123.45.67.89
    DEBUG:    server = dynupdate.no-ip.com

Next, you'll have to set up a cron job to periodically update your IP:

* `sudo nano /etc/cron.d/ddclient`
* Paste in the following:

        ######################################################################
        ## ddclient is an IP address updater
        ######################################################################
        ## minute         0-59
        ## hour           0-23
        ## day of month   1-31
        ## month          1-12 (or names, see below)
        ## day of week    0-7 (0 or 7 is Sun, or use names)
        ######################################################################
        ## request an update daily
        30 23 * * *	root    /usr/sbin/ddclient -daemon=0 -syslog -quiet
        
        ######################################################################
        ## retry failed updates every hour
        0 * * * *	root    /usr/sbin/ddclient -daemon=0 -syslog -quiet retry

* [Ctrl+X], [Y], then [Enter]

At this point, you should be good to move on to [PiVPN](PiVPN.md).

